{"ast":null,"code":"var _jsxFileName = \"/Users/rookasrudzianskas/Documents/React/SLACK_MERN_JS/SLACK_FRONTEND/src/Chat.js\";\nimport React, { useState, useEffect } from 'react';\nimport \"./Chat.css\";\nimport { useParams } from \"react-router-dom\";\nimport { InfoOutlined, StarBorderOutlined } from '@material-ui/icons';\nimport db from './firebase';\nimport Message from './Message';\nimport ChatInput from './ChatInput';\nimport axios from \"./axios\";\n\nconst Chat = () => {\n  const {\n    roomId\n  } = useParams();\n  const [roomDetails, setRoomDetails] = useState(null);\n  const [roomMessages, setRoomMessages] = useState([]);\n  useEffect(() => {\n    // if (roomId) {\n    //     db.collection(\"rooms\")\n    //         .doc(roomId)\n    //         .onSnapshot((snapshot) => setRoomDetails(snapshot.data()));\n    // }\n    //\n    // db.collection(\"rooms\")\n    //     .doc(roomId)\n    //     .collection(\"messages\")\n    //     .orderBy(\"timestamp\", \"asc\")\n    //     .onSnapshot((snapshot) =>\n    //         setRoomMessages(snapshot.docs.map((doc) => doc.data()))\n    //     );\n    axios.get(`/get.conversation?id=${roomId}`).then(res => {\n      setRoomDetails(res.data[0].channelName);\n      setRoomMessages(res.data[0].conversation);\n    });\n  }, [roomId]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat__headerLeft\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"chat__channelName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 25\n    }\n  }, \" #\", roomDetails === null || roomDetails === void 0 ? void 0 : roomDetails.name, \" \"), /*#__PURE__*/React.createElement(StarBorderOutlined, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat__headerRight\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(InfoOutlined, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 24\n    }\n  }), \" Details\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat__messages\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, roomMessages.map(({\n    message,\n    timestamp,\n    user,\n    userImage\n  }) => /*#__PURE__*/React.createElement(Message, {\n    message: message,\n    timestamp: timestamp,\n    user: user,\n    userImage: userImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(ChatInput, {\n    channelName: roomDetails === null || roomDetails === void 0 ? void 0 : roomDetails.name,\n    channelId: roomId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default Chat;","map":{"version":3,"sources":["/Users/rookasrudzianskas/Documents/React/SLACK_MERN_JS/SLACK_FRONTEND/src/Chat.js"],"names":["React","useState","useEffect","useParams","InfoOutlined","StarBorderOutlined","db","Message","ChatInput","axios","Chat","roomId","roomDetails","setRoomDetails","roomMessages","setRoomMessages","get","then","res","data","channelName","conversation","name","map","message","timestamp","user","userImage"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAO,YAAP;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,SAASC,YAAT,EAAuBC,kBAAvB,QAAiD,oBAAjD;AACA,OAAOC,EAAP,MAAe,YAAf;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,KAAP,MAAkB,SAAlB;;AAEA,MAAMC,IAAI,GAAG,MAAM;AACf,QAAM;AAAEC,IAAAA;AAAF,MAAaR,SAAS,EAA5B;AACA,QAAM,CAACS,WAAD,EAAcC,cAAd,IAAgCZ,QAAQ,CAAC,IAAD,CAA9C;AACA,QAAM,CAACa,YAAD,EAAeC,eAAf,IAAkCd,QAAQ,CAAC,EAAD,CAAhD;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGAO,IAAAA,KAAK,CAACO,GAAN,CAAW,wBAAuBL,MAAO,EAAzC,EAA4CM,IAA5C,CAAkDC,GAAD,IAAS;AACtDL,MAAAA,cAAc,CAACK,GAAG,CAACC,IAAJ,CAAS,CAAT,EAAYC,WAAb,CAAd;AACAL,MAAAA,eAAe,CAACG,GAAG,CAACC,IAAJ,CAAS,CAAT,EAAYE,YAAb,CAAf;AACH,KAHD;AAIH,GApBQ,EAoBN,CAACV,MAAD,CApBM,CAAT;AAsBA,sBACI;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAI,IAAA,SAAS,EAAC,mBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAWC,WAAX,aAAWA,WAAX,uBAAWA,WAAW,CAAEU,IAAxB,MADJ,eAGI,oBAAC,kBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHJ,CADJ,CADJ,eASI;AAAK,IAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAG,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAH,aADJ,CATJ,CADJ,eAgBI;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKR,YAAY,CAACS,GAAb,CAAiB,CAAC;AAAEC,IAAAA,OAAF;AAAWC,IAAAA,SAAX;AAAsBC,IAAAA,IAAtB;AAA4BC,IAAAA;AAA5B,GAAD,kBACd,oBAAC,OAAD;AACI,IAAA,OAAO,EAAEH,OADb;AAEI,IAAA,SAAS,EAAEC,SAFf;AAGI,IAAA,IAAI,EAAEC,IAHV;AAII,IAAA,SAAS,EAAEC,SAJf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADH,CADL,CAhBJ,eA0BI,oBAAC,SAAD;AAAW,IAAA,WAAW,EAAEf,WAAF,aAAEA,WAAF,uBAAEA,WAAW,CAAEU,IAArC;AAA2C,IAAA,SAAS,EAAEX,MAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA1BJ,CADJ;AA8BH,CAzDD;;AA2DA,eAAeD,IAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport \"./Chat.css\"\nimport { useParams } from \"react-router-dom\"\nimport { InfoOutlined, StarBorderOutlined } from '@material-ui/icons';\nimport db from './firebase'\nimport Message from './Message'\nimport ChatInput from './ChatInput';\nimport axios from \"./axios\";\n\nconst Chat = () => {\n    const { roomId } = useParams();\n    const [roomDetails, setRoomDetails] = useState(null);\n    const [roomMessages, setRoomMessages] = useState([]);\n\n    useEffect(() => {\n        // if (roomId) {\n        //     db.collection(\"rooms\")\n        //         .doc(roomId)\n        //         .onSnapshot((snapshot) => setRoomDetails(snapshot.data()));\n        // }\n        //\n        // db.collection(\"rooms\")\n        //     .doc(roomId)\n        //     .collection(\"messages\")\n        //     .orderBy(\"timestamp\", \"asc\")\n        //     .onSnapshot((snapshot) =>\n        //         setRoomMessages(snapshot.docs.map((doc) => doc.data()))\n        //     );\n\n\n        axios.get(`/get.conversation?id=${roomId}`).then((res) => {\n            setRoomDetails(res.data[0].channelName);\n            setRoomMessages(res.data[0].conversation);\n        })\n    }, [roomId])\n\n    return (\n        <div className=\"chat\">\n            <div className=\"chat__header\">\n                <div className=\"chat__headerLeft\">\n                    <h4 className=\"chat__channelName\">\n                        <strong> #{roomDetails?.name} </strong>\n                        {/* <strong>#general</strong> */}\n                        <StarBorderOutlined />\n                    </h4>\n                </div>\n\n                <div className=\"chat__headerRight\">\n                    <p><InfoOutlined /> Details</p>\n\n                </div>\n            </div>\n\n            <div className=\"chat__messages\">\n                {roomMessages.map(({ message, timestamp, user, userImage }) => (\n                    <Message\n                        message={message}\n                        timestamp={timestamp}\n                        user={user}\n                        userImage={userImage}\n                    />\n                ))}\n            </div>\n            <ChatInput channelName={roomDetails?.name} channelId={roomId} />\n        </div>\n    )\n}\n\nexport default Chat\n"]},"metadata":{},"sourceType":"module"}